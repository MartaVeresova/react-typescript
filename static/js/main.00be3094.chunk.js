(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{20:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__3Dn8Z",dialogsItem:"Dialogs_dialogsItem__1NNkN",textarea:"Dialogs_textarea__2IKdi"}},23:function(e,t,n){e.exports={profile:"Profile_profile__395W3"}},24:function(e,t,n){e.exports={myPosts:"MyPosts_myPosts__1Sq30",textarea:"MyPosts_textarea__1jrIv",button:"MyPosts_button__3kRgS"}},27:function(e,t,n){e.exports={appWrapper:"App_appWrapper__1upY6",appWrapperContent:"App_appWrapperContent__1w-fS"}},30:function(e,t,n){e.exports={item:"DialogItem_item__FOhNE",activeLink:"DialogItem_activeLink__1OjsT"}},31:function(e,t,n){e.exports={userPhoto:"Users_userPhoto__Sr8R7",selectedPage:"Users_selectedPage__3gyJ6"}},32:function(e,t,n){e.exports={profileInfo:"ProfileInfo_profileInfo__26XEX",descriptionBlock:"ProfileInfo_descriptionBlock__2MG0-"}},33:function(e,t,n){e.exports={header:"Header_header__tmv2U",loginBlock:"Header_loginBlock__1H5dx"}},43:function(e,t,n){e.exports={news:"News_news__1E9ra"}},44:function(e,t,n){e.exports={music:"Music_music__P7Nrm"}},45:function(e,t,n){e.exports={settings:"Settings_settings__hPAd8"}},46:function(e,t,n){e.exports={message:"Message_message__1jjej"}},48:function(e,t,n){e.exports={item:"Post_item__1AFhw"}},51:function(e,t,n){},6:function(e,t,n){e.exports={nav:"Navbar_nav__6-fH1",item:"Navbar_item__3Ldnh",activeLink:"Navbar_activeLink__uFs2O"}},79:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),r=(n(51),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),s(e),a(e),r(e),c(e)}))}),c=n(21),i=n.n(c),o=n(27),l=n.n(o),u=n(5),j=n(6),d=n.n(j),g=n(0);function p(){return Object(g.jsxs)("nav",{className:d.a.nav,children:[Object(g.jsx)("div",{className:d.a.item,children:Object(g.jsx)(u.b,{to:"/profile",activeClassName:d.a.activeLink,children:"Profile"})}),Object(g.jsx)("div",{className:"".concat(d.a.item," ").concat(d.a.active),children:Object(g.jsx)(u.b,{to:"/dialogs",activeClassName:d.a.activeLink,children:"Messages"})}),Object(g.jsx)("div",{className:"".concat(d.a.item," ").concat(d.a.active),children:Object(g.jsx)(u.b,{to:"/users",activeClassName:d.a.activeLink,children:"Users"})}),Object(g.jsx)("div",{className:d.a.item,children:Object(g.jsx)(u.b,{to:"/news",activeClassName:d.a.activeLink,children:"News"})}),Object(g.jsx)("div",{className:d.a.item,children:Object(g.jsx)(u.b,{to:"/music",activeClassName:d.a.activeLink,children:"Music"})}),Object(g.jsx)("div",{className:d.a.item,children:Object(g.jsx)(u.b,{to:"/settings",activeClassName:d.a.activeLink,children:"Settings"})})]})}var b=n(43),f=n.n(b);function h(){return Object(g.jsx)("div",{className:f.a.news,children:"News"})}var O=n(44),x=n.n(O);function m(){return Object(g.jsx)("div",{className:x.a.music,children:"Music"})}var v=n(45),P=n.n(v);function w(){return Object(g.jsx)("div",{className:P.a.settings,children:"Settings"})}var _=n(4),C=n(16),N=n(2),I=n(80),y="ADD-MESSAGE",T="UPDATE-NEW-MESSAGE-TEXT",k={dialogsData:[{id:Object(I.a)(),name:"Marta"},{id:Object(I.a)(),name:"Sasha"},{id:Object(I.a)(),name:"Vera"},{id:Object(I.a)(),name:"Anton"},{id:Object(I.a)(),name:"Vanya"}],messagesData:[{id:Object(I.a)(),messageContent:"Hello"},{id:Object(I.a)(),messageContent:"How are you?"},{id:Object(I.a)(),messageContent:"Yo"}],newMessageText:""},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(N.a)(Object(N.a)({},e),{},{newMessageText:"",messagesData:[].concat(Object(C.a)(e.messagesData),[{id:Object(I.a)(),messageContent:e.newMessageText}])});case T:return Object(N.a)(Object(N.a)({},e),{},{newMessageText:t.newText});default:return e}},F=n(20),D=n.n(F),E=n(46),U=n.n(E);function M(e){return Object(g.jsx)("div",{className:U.a.message,children:e.messageContent})}var L=n(30),A=n.n(L);function R(e){var t="/dialogs/"+e.id;return Object(g.jsx)("div",{className:"".concat(A.a.item," ").concat(A.a.activeLink),children:Object(g.jsxs)(u.b,{to:t,children:[Object(g.jsx)("img",{src:"https://avatars.mds.yandex.net/get-pdb/1025945/a6f96698-c78d-44fb-b802-38e74e0164dd/s1200",alt:""}),e.name]})})}var W=n(11),G=Object(W.b)((function(e){return{stateDialogsPage:e.dialogsPage}}),{addMessage:function(){return{type:y}},updateNewMessageText:function(e){return{type:T,newText:e}}})((function(e){var t=e.stateDialogsPage.dialogsData.map((function(e){return Object(g.jsx)(R,{name:e.name,id:e.id},e.id)})),n=e.stateDialogsPage.messagesData.map((function(e){return Object(g.jsx)(M,{messageContent:e.messageContent},e.id)})),s=function(){e.addMessage()};return Object(g.jsxs)("div",{className:D.a.dialogs,children:[Object(g.jsx)("div",{className:D.a.dialogsItem,children:t}),Object(g.jsxs)("div",{className:D.a.messagesItem,children:[n,Object(g.jsx)("div",{children:Object(g.jsx)("textarea",{placeholder:"Enter your message",className:D.a.textarea,onChange:function(t){e.updateNewMessageText(t.currentTarget.value)},value:e.stateDialogsPage.newMessageText,onKeyPress:function(e){"Enter"===e.key&&s()}})}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{onClick:s,children:"Add message"})})]})]})})),B=n(14),z=n(15),H=n(18),J=n(17),K="FOLLOW",X="UNFOLLOW",Y="SET-USERS",q="SET-CURRENT-PAGE",V="SET-TOTAL-USERS-COUNT",Q="TOGGLE-IS-FETCHING",Z="TOGGLE-IS-FOLLOWING-PROGRESS",$={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:["2","3"]},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return Object(N.a)(Object(N.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(N.a)(Object(N.a)({},e),{},{followed:!0}):e}))});case X:return Object(N.a)(Object(N.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(N.a)(Object(N.a)({},e),{},{followed:!1}):e}))});case Y:return Object(N.a)(Object(N.a)({},e),{},{users:t.users});case q:return Object(N.a)(Object(N.a)({},e),{},{currentPage:t.currentPage});case V:return Object(N.a)(Object(N.a)({},e),{},{totalUsersCount:t.totalCount});case Q:return Object(N.a)(Object(N.a)({},e),{},{isFetching:t.isFetching});case Z:return Object(N.a)(Object(N.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(C.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},te=n.p+"static/media/user.4409fc97.png",ne=n(31),se=n.n(ne),ae=n(47),re=n.n(ae).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"56cc9d09-6ac5-48a7-98d1-6f7ea21ef704"}}),ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return re.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},ie=function(e){return re.post("follow/".concat(e)).then((function(e){return e.data}))},oe=function(e){return re.delete("follow/".concat(e)).then((function(e){return e.data}))},le=function(){return re.get("auth/me").then((function(e){return e.data}))},ue=function(e){return re.get("profile/"+e).then((function(e){return e.data}))};function je(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],s=1;s<=t;s++)n.push(s);return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:n.map((function(t){return Object(g.jsx)("span",{className:e.currentPage===t?se.a.selectedPage:"",onClick:function(n){return e.onPageChanged(t)},children:t})}))}),e.users.map((function(t){return Object(g.jsxs)("div",{children:[Object(g.jsxs)("span",{children:[Object(g.jsx)("div",{children:Object(g.jsx)(u.b,{to:"/profile/"+t.id,children:Object(g.jsx)("img",{src:null!==t.photos.small?t.photos.small:te,className:se.a.userPhoto,alt:""})})}),Object(g.jsx)("div",{children:t.followed?Object(g.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.toggleIsFollowingProgress(!0,t.id),oe(t.id).then((function(n){0===n.resultCode&&e.unfollow(t.id),e.toggleIsFollowingProgress(!1,t.id)}))},children:"unFollow"}):Object(g.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.toggleIsFollowingProgress(!0,t.id),ie(t.id).then((function(n){0===n.resultCode&&e.follow(t.id),e.toggleIsFollowingProgress(!1,t.id)}))},children:"follow"})})]}),Object(g.jsxs)("span",{children:[Object(g.jsx)("div",{children:t.name}),Object(g.jsx)("div",{children:t.status})]}),Object(g.jsxs)("span",{children:[Object(g.jsx)("div",{children:"u.location.country"}),Object(g.jsx)("div",{children:"u.location.city"})]})]},t.id)}))]})}var de=n.p+"static/media/preloader.5665744c.svg";function ge(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("img",{src:de,alt:""})})}var pe=function(e){Object(H.a)(n,e);var t=Object(J.a)(n);function n(){var e;Object(B.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.toggleIsFetching(!0),ce(t,e.props.pageSize).then((function(t){e.props.setUsers(t.items),e.props.toggleIsFetching(!1)}))},e}return Object(z.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.toggleIsFetching(!0),ce(this.props.currentPage,this.props.pageSize).then((function(t){e.props.toggleIsFetching(!1),e.props.setUsers(t.items),e.props.setTotalUsersCount(t.totalCount)}))}},{key:"render",value:function(){return Object(g.jsxs)(g.Fragment,{children:[this.props.isFetching?Object(g.jsx)(ge,{}):null,Object(g.jsx)(je,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress,toggleIsFollowingProgress:this.props.toggleIsFollowingProgress})]})}}]),n}(a.a.Component),be=Object(W.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{follow:function(e){return{type:K,userId:e}},unfollow:function(e){return{type:X,userId:e}},setUsers:function(e){return{type:Y,users:e}},setCurrentPage:function(e){return{type:q,currentPage:e}},setTotalUsersCount:function(e){return{type:V,totalCount:e}},toggleIsFetching:function(e){return{type:Q,isFetching:e}},toggleIsFollowingProgress:function(e,t){return{type:Z,isFetching:e,userId:t}}})(pe),fe=n(23),he=n.n(fe),Oe=n(32),xe=n.n(Oe);function me(e){return e.profile?Object(g.jsxs)("div",{className:xe.a.profileInfo,children:[Object(g.jsx)("div",{children:Object(g.jsx)("img",{src:"https://images.ctfassets.net/hrltx12pl8hq/7yQR5uJhwEkRfjwMFJ7bUK/dc52a0913e8ff8b5c276177890eb0129/offset_comp_772626-opt.jpg?fit=fill&w=800&h=300",alt:""})}),Object(g.jsxs)("div",{className:xe.a.descriptionBlock,children:[Object(g.jsx)("img",{src:e.profile.photos.large,alt:""}),"ava+description"]})]}):Object(g.jsx)(ge,{})}var ve="ADD-POST",Pe="UPDATE-NEW-POST-TEXT",we="SET-USER-PROFILE",_e={postsData:[{id:Object(I.a)(),message:"Hello",likesCount:11},{id:Object(I.a)(),message:"Buy",likesCount:15}],newPostText:"",profile:null},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(N.a)(Object(N.a)({},e),{},{newPostText:"",postsData:[].concat(Object(C.a)(e.postsData),[{id:Object(I.a)(),message:e.newPostText,likesCount:0}])});case Pe:return Object(N.a)(Object(N.a)({},e),{},{newPostText:t.newText});case we:return Object(N.a)(Object(N.a)({},e),{},{profile:t.profile});default:return e}},Ne=n(48),Ie=n.n(Ne);function ye(e){return Object(g.jsxs)("div",{className:Ie.a.item,children:[Object(g.jsx)("img",{src:"https://shapka-youtube.ru/wp-content/uploads/2021/02/prikolnaya-avatarka-dlya-patsanov.jpg",alt:""}),e.message,Object(g.jsx)("div",{children:Object(g.jsx)("span",{children:e.likesCount})})]})}var Te=n(24),ke=n.n(Te);var Se=Object(W.b)((function(e){return{postsData:e.profilePage.postsData,newPostText:e.profilePage.newPostText}}),{addPost:function(){return{type:ve}},updateNewPostText:function(e){return{type:Pe,newText:e}}})((function(e){var t=e.postsData.map((function(e){return Object(g.jsx)(ye,{message:e.message,likesCount:e.likesCount},e.id)})),n=function(){e.addPost()};return Object(g.jsxs)("div",{className:ke.a.myPosts,children:[Object(g.jsx)("h3",{children:"My posts"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:ke.a.textarea,children:Object(g.jsx)("textarea",{onChange:function(t){e.updateNewPostText(t.currentTarget.value)},value:e.newPostText,onKeyPress:function(e){"Enter"===e.key&&n()}})}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{className:ke.a.button,onClick:n,children:"Add post"})})]}),Object(g.jsx)("div",{children:t})]})}));function Fe(e){return Object(g.jsxs)("div",{className:he.a.profile,children:[Object(g.jsx)(me,{profile:e.profile}),Object(g.jsx)(Se,{})]})}var De=function(e){Object(H.a)(n,e);var t=Object(J.a)(n);function n(){return Object(B.a)(this,n),t.apply(this,arguments)}return Object(z.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userId;t||(t="2"),ue(t).then((function(t){e.props.setUserProfile(t)}))}},{key:"render",value:function(){return Object(g.jsx)("div",{className:he.a.profile,children:Object(g.jsx)(Fe,{profile:this.props.profile})})}}]),n}(a.a.Component),Ee=Object(_.e)(De),Ue=Object(W.b)((function(e){return{profile:e.profilePage.profile}}),{setUserProfile:function(e){return{type:we,profile:e}}})(Ee),Me=n(33),Le=n.n(Me),Ae=n.p+"static/media/Logo_header.8aaf41b6.png";function Re(e){return Object(g.jsxs)("header",{className:Le.a.header,children:[Object(g.jsx)("img",{src:Ae,alt:""}),Object(g.jsx)("div",{className:Le.a.loginBlock,children:e.isAuth?e.login:Object(g.jsx)(u.b,{to:"/login",children:"Login"})})]})}var We="SET-USER-DATA",Ge={userId:null,email:null,login:null,isAuth:!1},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case We:return Object(N.a)(Object(N.a)(Object(N.a)({},e),t.data),{},{isAuth:!0});default:return e}},ze=function(e){Object(H.a)(n,e);var t=Object(J.a)(n);function n(){return Object(B.a)(this,n),t.apply(this,arguments)}return Object(z.a)(n,[{key:"componentDidMount",value:function(){var e=this;le().then((function(t){if(0===t.resultCode){var n=t.data,s=n.id,a=n.email,r=n.login;e.props.setAuthUserData(s,a,r)}}))}},{key:"render",value:function(){return Object(g.jsx)(Re,Object(N.a)({},this.props))}}]),n}(a.a.Component),He=Object(W.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setAuthUserData:function(e,t,n){return{type:We,data:{userId:e,email:t,login:n}}}})(ze);var Je=function(){return Object(g.jsxs)("div",{className:l.a.appWrapper,children:[Object(g.jsx)(He,{}),Object(g.jsx)(p,{}),Object(g.jsxs)("div",{className:l.a.appWrapperContent,children:[Object(g.jsx)(_.a,{exact:!0,path:"/profile/:userId?",render:function(){return Object(g.jsx)(Ue,{})}}),Object(g.jsx)(_.a,{exact:!0,path:"/dialogs",render:function(){return Object(g.jsx)(G,{})}}),Object(g.jsx)(_.a,{exact:!0,path:"/users",render:function(){return Object(g.jsx)(be,{})}}),Object(g.jsx)(_.a,{exact:!0,path:"/news",render:function(){return Object(g.jsx)(h,{})}}),Object(g.jsx)(_.a,{exact:!0,path:"/music",render:function(){return Object(g.jsx)(m,{})}}),Object(g.jsx)(_.a,{exact:!0,path:"/settings",render:function(){return Object(g.jsx)(w,{})}})]})]})},Ke=n(34),Xe={},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;return e},qe=Object(Ke.a)({profilePage:Ce,dialogsPage:S,sidebar:Ye,usersPage:ee,auth:Be}),Ve=Object(Ke.b)(qe);window.store=Ve,i.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(u.a,{children:Object(g.jsx)(W.a,{store:Ve,children:Object(g.jsx)(Je,{})})})}),document.getElementById("root")),r()}},[[79,1,2]]]);
//# sourceMappingURL=main.00be3094.chunk.js.map