(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{131:function(e,t,n){e.exports={news:"News_news__1E9ra"}},132:function(e,t,n){e.exports={music:"Music_music__P7Nrm"}},133:function(e,t,n){e.exports={settings:"Settings_settings__hPAd8"}},134:function(e,t,n){e.exports={message:"Message_message__1jjej"}},135:function(e,t,n){e.exports={item:"Post_item__1AFhw"}},15:function(e,t,n){e.exports={nav:"Navbar_nav__6-fH1",item:"Navbar_item__3Ldnh",activeLink:"Navbar_activeLink__uFs2O"}},163:function(e,t,n){},290:function(e,t,n){"use strict";n.r(t);var r,s=n(1),a=n.n(s),c=(n(163),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,292)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))}),i=n(63),o=n.n(i),u=n(13),l=n(11),j=n(9),d=n(128),p=n(10),b=n.n(p),f=n(17),O=n(34),h=n(3),g=n(291),m=n(129),x=n.n(m).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"56cc9d09-6ac5-48a7-98d1-6f7ea21ef704"}}),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return x.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},P=function(e){return x.post("follow/".concat(e)).then((function(e){return e.data}))},S=function(e){return x.delete("follow/".concat(e)).then((function(e){return e.data}))},w=function(e){return x.get("profile/".concat(e)).then((function(e){return e.data}))},_=function(e){return x.get("/profile/status/".concat(e)).then((function(e){return e.data}))},C=function(e){return x.put("/profile/status",{status:e}).then((function(e){return e.data}))},y=function(){return x.get("auth/me").then((function(e){return e.data}))},I=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return x.post("/auth/login",{email:e,password:t,rememberMe:n,captcha:r}).then((function(e){return e.data}))},N=function(){return x.delete("/auth/login").then((function(e){return e.data}))};!function(e){e[e.success=0]="success",e[e.error=1]="error",e[e.captcha=10]="captcha"}(r||(r={}));var E={postsData:[{id:Object(g.a)(),message:"Hello",likesCount:11},{id:Object(g.a)(),message:"Buy",likesCount:15},{id:Object(g.a)(),message:"How are you?",likesCount:7},{id:Object(g.a)(),message:"I am fine, and you?",likesCount:5}],profile:null,status:""},k=function(e){return{type:"profilePage/SET-STATUS",status:e}},T={dialogsData:[{id:Object(g.a)(),name:"Marta"},{id:Object(g.a)(),name:"Sasha"},{id:Object(g.a)(),name:"Vera"},{id:Object(g.a)(),name:"Anton"},{id:Object(g.a)(),name:"Vanya"}],messagesData:[{id:Object(g.a)(),messageContent:"Hello"},{id:Object(g.a)(),messageContent:"How are you?"},{id:Object(g.a)(),messageContent:"Yo"}]},U={},A={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},D=function(e){return{type:"usersPage/FOLLOW",userId:e}},L=function(e){return{type:"usersPage/UNFOLLOW",userId:e}},F=function(e){return{type:"usersPage/SET-CURRENT-PAGE",currentPage:e}},M=function(e){return{type:"usersPage/TOGGLE-IS-FETCHING",value:e}},R=function(e,t){return{type:"usersPage/TOGGLE-IS-FOLLOWING-PROGRESS",inProgress:e,userId:t}},G=n(25),z={userId:null,email:null,login:null,captcha:!1,isAuth:!1},W=function(e,t,n,r,s){return{type:"auth/SET-USER-DATA",payload:{userId:e,email:t,login:n,captcha:r,isAuth:s}}},B=function(){return function(){var e=Object(f.a)(b.a.mark((function e(t){var n,s,a,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return(n=e.sent).resultCode===r.success&&(s=n.data,a=s.id,c=s.email,i=s.login,t(W(a,c,i,!0,!0))),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},H=n(127),q={initialized:!1},J=Object(j.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"profilePage/ADD-POST":return Object(h.a)(Object(h.a)({},e),{},{postsData:[].concat(Object(O.a)(e.postsData),[{id:Object(g.a)(),message:t.newPostText,likesCount:0}])});case"profilePage/SET-USER-PROFILE":return Object(h.a)(Object(h.a)({},e),{},{profile:t.profile});case"profilePage/SET-STATUS":return Object(h.a)(Object(h.a)({},e),{},{status:t.status});case"profilePage/REMOVE-POST":return Object(h.a)(Object(h.a)({},e),{},{postsData:Object(O.a)(e.postsData.filter((function(e){return e.id!==t.postId})))});default:return e}},dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dialogsPage/ADD-MESSAGE":return Object(h.a)(Object(h.a)({},e),{},{messagesData:[].concat(Object(O.a)(e.messagesData),[{id:Object(g.a)(),messageContent:t.newMessageText}])});case"dialogsPage/REMOVE-MESSAGE":return Object(h.a)(Object(h.a)({},e),{},{messagesData:Object(O.a)(e.messagesData.filter((function(e){return e.id!==t.messageId})))});default:return e}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sidebar/":return Object(h.a)({},e);default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"usersPage/FOLLOW":return Object(h.a)(Object(h.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(h.a)(Object(h.a)({},e),{},{followed:!0}):e}))});case"usersPage/UNFOLLOW":return Object(h.a)(Object(h.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(h.a)(Object(h.a)({},e),{},{followed:!1}):e}))});case"usersPage/SET-USERS":return Object(h.a)(Object(h.a)({},e),{},{users:t.users});case"usersPage/SET-CURRENT-PAGE":return Object(h.a)(Object(h.a)({},e),{},{currentPage:t.currentPage});case"usersPage/SET-TOTAL-USERS-COUNT":return Object(h.a)(Object(h.a)({},e),{},{totalUsersCount:t.totalCount});case"usersPage/TOGGLE-IS-FETCHING":return Object(h.a)(Object(h.a)({},e),{},{isFetching:t.value});case"usersPage/TOGGLE-IS-FOLLOWING-PROGRESS":return Object(h.a)(Object(h.a)({},e),{},{followingInProgress:t.inProgress?[].concat(Object(O.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET-USER-DATA":return Object(h.a)(Object(h.a)({},e),t.payload);default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/INITIALIZED-SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{initialized:!0});default:return e}},form:H.a}),V=Object(j.e)(J,Object(j.a)(d.a));window.store=V;var Z=n(29),K=n(30),Y=n(32),X=n(31),Q=n(86),$=n.n(Q),ee=n(15),te=n.n(ee),ne=n(0);function re(){return Object(ne.jsxs)("nav",{className:te.a.nav,children:[Object(ne.jsx)("div",{className:te.a.item,children:Object(ne.jsx)(u.b,{to:"/profile",activeClassName:te.a.activeLink,children:"Profile"})}),Object(ne.jsx)("div",{className:"".concat(te.a.item," ").concat(te.a.active),children:Object(ne.jsx)(u.b,{to:"/dialogs",activeClassName:te.a.activeLink,children:"Messages"})}),Object(ne.jsx)("div",{className:"".concat(te.a.item," ").concat(te.a.active),children:Object(ne.jsx)(u.b,{to:"/users",activeClassName:te.a.activeLink,children:"Users"})}),Object(ne.jsx)("div",{className:te.a.item,children:Object(ne.jsx)(u.b,{to:"/news",activeClassName:te.a.activeLink,children:"News"})}),Object(ne.jsx)("div",{className:te.a.item,children:Object(ne.jsx)(u.b,{to:"/music",activeClassName:te.a.activeLink,children:"Music"})}),Object(ne.jsx)("div",{className:te.a.item,children:Object(ne.jsx)(u.b,{to:"/settings",activeClassName:te.a.activeLink,children:"Settings"})})]})}var se=n(131),ae=n.n(se);function ce(){return Object(ne.jsx)("div",{className:ae.a.news,children:"News"})}var ie=n(132),oe=n.n(ie);function ue(){return Object(ne.jsx)("div",{className:oe.a.music,children:"Music"})}var le=n(133),je=n.n(le);function de(){return Object(ne.jsx)("div",{className:je.a.settings,children:"Settings"})}var pe=n(12),be=n(43),fe=n.n(be),Oe=n(134),he=n.n(Oe);function ge(e){return Object(ne.jsx)("div",{className:he.a.message,children:e.messageContent})}var me=n(89),xe=n.n(me);function ve(e){var t="/dialogs/"+e.id;return Object(ne.jsx)("div",{className:"".concat(xe.a.item," ").concat(xe.a.activeLink),children:Object(ne.jsxs)(u.b,{to:t,children:[Object(ne.jsx)("img",{src:"https://avatars.mds.yandex.net/get-pdb/1025945/a6f96698-c78d-44fb-b802-38e74e0164dd/s1200",alt:""}),e.name]})})}var Pe=n(126),Se=function(e){if(!e)return"Field is required"},we=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}},_e=n(125),Ce=n(44),ye=n(53),Ie=n.n(ye),Ne=function(e){e.input;var t=e.meta,n=e.children,r=(Object(Ce.a)(e,["input","meta","children"]),t.touched&&t.error);return Object(ne.jsxs)("div",{className:Ie.a.formControl+" "+(r&&Ie.a.error),children:[Object(ne.jsx)("div",{children:n}),r&&Object(ne.jsx)("span",{children:t.error})]})},Ee=function(e){var t=e.input,n=(e.meta,e.children,Object(Ce.a)(e,["input","meta","children"]));return Object(ne.jsx)(Ne,Object(h.a)(Object(h.a)({},e),{},{children:Object(ne.jsx)("textarea",Object(h.a)(Object(h.a)({},t),n))}))},ke=function(e){var t=e.input,n=(e.meta,e.children,Object(Ce.a)(e,["input","meta","children"]));return Object(ne.jsx)(Ne,Object(h.a)(Object(h.a)({},e),{},{children:Object(ne.jsx)("input",Object(h.a)(Object(h.a)({},t),n))}))},Te=we(50);var Ue=Object(Pe.a)({form:"addMessageForm"})((function(e){return Object(ne.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(ne.jsx)("div",{children:Object(ne.jsx)(_e.a,{className:fe.a.textarea,placeholder:"Enter your message",name:"newMessageText",component:Ee,validate:[Se,Te]})}),Object(ne.jsx)("div",{children:Object(ne.jsx)("button",{children:"Add message"})})]})})),Ae=function(e){return{isAuth:e.auth.isAuth}};function De(e){return Object(l.b)(Ae)((function(t){var n=t.isAuth,r=Object(Ce.a)(t,["isAuth"]);return n?Object(ne.jsx)(e,Object(h.a)({},r)):Object(ne.jsx)(pe.a,{to:"/login"})}))}var Le=Object(j.d)(Object(l.b)((function(e){return{stateDialogsPage:e.dialogsPage}}),{addMessage:function(e){return{type:"dialogsPage/ADD-MESSAGE",newMessageText:e}}}),De)((function(e){var t=e.stateDialogsPage.dialogsData.map((function(e){return Object(ne.jsx)(ve,{name:e.name,id:e.id},e.id)})),n=e.stateDialogsPage.messagesData.map((function(e){return Object(ne.jsx)(ge,{messageContent:e.messageContent},e.id)}));return Object(ne.jsxs)("div",{className:fe.a.dialogs,children:[Object(ne.jsx)("div",{className:fe.a.dialogsItem,children:t}),Object(ne.jsxs)("div",{className:fe.a.messagesItem,children:[n,Object(ne.jsx)(Ue,{onSubmit:function(t){e.addMessage(t.newMessageText)}})]})]})})),Fe=n.p+"static/media/user.4409fc97.png",Me=n(92),Re=n.n(Me);function Ge(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],r=1;r<=t;r++)n.push(r);return console.log(e.followingInProgress),Object(ne.jsxs)("div",{children:[Object(ne.jsx)("div",{children:n.map((function(t){return Object(ne.jsx)("span",{className:e.currentPage===t?Re.a.selectedPage:"",onClick:function(n){return e.onPageChanged(t)},children:t},t)}))}),e.users.map((function(t){return Object(ne.jsxs)("div",{children:[Object(ne.jsxs)("span",{children:[Object(ne.jsx)("div",{children:Object(ne.jsx)(u.b,{to:"/profile/"+t.id,children:Object(ne.jsx)("img",{src:null!==t.photos.small?t.photos.small:Fe,className:Re.a.userPhoto,alt:""})})}),Object(ne.jsx)("div",{children:t.followed?Object(ne.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){return e.unfollow(t.id)},children:"unFollow"}):Object(ne.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){return e.follow(t.id)},children:"follow"})})]}),Object(ne.jsxs)("span",{children:[Object(ne.jsx)("div",{children:t.name}),Object(ne.jsx)("div",{children:t.status})]}),Object(ne.jsxs)("span",{children:[Object(ne.jsx)("div",{children:"u.location.country"}),Object(ne.jsx)("div",{children:"u.location.city"})]})]},t.id)}))]})}var ze=n.p+"static/media/preloader.5665744c.svg";function We(){return Object(ne.jsx)(ne.Fragment,{children:Object(ne.jsx)("img",{src:ze,alt:""})})}var Be=function(e){return e.usersPage.users},He=function(e){return e.usersPage.pageSize},qe=function(e){return e.usersPage.totalUsersCount},Je=function(e){return e.usersPage.currentPage},Ve=function(e){return e.usersPage.isFetching},Ze=function(e){return e.usersPage.followingInProgress},Ke=function(e){Object(Y.a)(n,e);var t=Object(X.a)(n);function n(){var e;Object(Z.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).onPageChanged=function(t){e.props.requestUsers(t,e.props.pageSize)},e}return Object(K.a)(n,[{key:"componentDidMount",value:function(){this.props.requestUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(ne.jsxs)(ne.Fragment,{children:[this.props.isFetching?Object(ne.jsx)(We,{}):null,Object(ne.jsx)(Ge,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress,toggleIsFollowingProgress:this.props.toggleIsFollowingProgress})]})}}]),n}(a.a.Component),Ye=Object(j.d)(Object(l.b)((function(e){return{users:Be(e),pageSize:He(e),totalUsersCount:qe(e),currentPage:Je(e),isFetching:Ve(e),followingInProgress:Ze(e)}}),{follow:function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(R(!0,e)),t.next=3,P(e);case 3:t.sent.resultCode===r.success&&n(D(e)),n(R(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(R(!0,e)),t.next=3,S(e);case 3:t.sent.resultCode===r.success&&n(L(e)),n(R(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:F,toggleIsFollowingProgress:R,requestUsers:function(e,t){return function(){var n=Object(f.a)(b.a.mark((function n(r){var s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(M(!0)),r(F(e)),n.next=4,v(e,t);case 4:s=n.sent,r(M(!1)),r({type:"usersPage/SET-USERS",users:s.items}),r({type:"usersPage/SET-TOTAL-USERS-COUNT",totalCount:s.totalCount});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}))(Ke),Xe=n(67),Qe=n.n(Xe),$e=n(93),et=n.n($e),tt=n(95),nt=function(e){var t=e.status,n=e.updateUserStatus,r=Object(s.useState)(!1),a=Object(tt.a)(r,2),c=a[0],i=a[1],o=Object(s.useState)(t),u=Object(tt.a)(o,2),l=u[0],j=u[1];Object(s.useEffect)((function(){j(t)}),[t]);return Object(ne.jsxs)("div",{children:[!c&&Object(ne.jsx)("div",{children:Object(ne.jsx)("span",{onDoubleClick:function(){i(!0)},children:"\ud83d\udd8a\ufe0f ".concat(t," ")})}),c&&Object(ne.jsx)("div",{children:Object(ne.jsx)("input",{autoFocus:!0,value:l,onBlur:function(){i(!1),n(l)},onChange:function(e){j(e.currentTarget.value)}})})]})};function rt(e){return e.profile?Object(ne.jsxs)("div",{className:et.a.profileInfo,children:[Object(ne.jsx)("div",{children:Object(ne.jsx)("img",{src:"https://images.ctfassets.net/hrltx12pl8hq/7yQR5uJhwEkRfjwMFJ7bUK/dc52a0913e8ff8b5c276177890eb0129/offset_comp_772626-opt.jpg?fit=fill&w=800&h=300",alt:""})}),Object(ne.jsxs)("div",{className:et.a.descriptionBlock,children:[Object(ne.jsx)("img",{src:e.profile.photos.large,alt:""}),Object(ne.jsx)(nt,{status:e.status,updateUserStatus:e.updateUserStatus})]})]}):Object(ne.jsx)(We,{})}var st=n(135),at=n.n(st);function ct(e){return Object(ne.jsxs)("div",{className:at.a.item,children:[Object(ne.jsx)("img",{src:"https://shapka-youtube.ru/wp-content/uploads/2021/02/prikolnaya-avatarka-dlya-patsanov.jpg",alt:""}),e.message,Object(ne.jsx)("div",{children:Object(ne.jsx)("span",{children:e.likesCount})})]})}var it=n(68),ot=n.n(it),ut=we(10),lt=a.a.memo((function(e){var t=e.postsData.map((function(e){return Object(ne.jsx)(ct,{message:e.message,likesCount:e.likesCount},e.id)}));return Object(ne.jsxs)("div",{className:ot.a.myPosts,children:[Object(ne.jsx)("h3",{children:"My posts"}),Object(ne.jsx)(jt,{onSubmit:function(t){e.addPost(t.newPostText)}}),Object(ne.jsx)("div",{children:t})]})})),jt=Object(Pe.a)({form:"addPostForm"})((function(e){return Object(ne.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(ne.jsx)("div",{children:Object(ne.jsx)(_e.a,{placeholder:"enter text",name:"newPostText",component:Ee,validate:[Se,ut]})}),Object(ne.jsx)("div",{children:Object(ne.jsx)("button",{className:ot.a.button,children:"Add post"})})]})})),dt=Object(l.b)((function(e){return{postsData:e.profilePage.postsData}}),{addPost:function(e){return{type:"profilePage/ADD-POST",newPostText:e}}})(lt);function pt(e){return Object(ne.jsxs)("div",{className:Qe.a.profile,children:[Object(ne.jsx)(rt,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus}),Object(ne.jsx)(dt,{})]})}var bt=function(e){Object(Y.a)(n,e);var t=Object(X.a)(n);function n(){return Object(Z.a)(this,n),t.apply(this,arguments)}return Object(K.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=JSON.stringify(this.props.authorizedUserId))||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"render",value:function(){return Object(ne.jsx)("div",{className:Qe.a.profile,children:Object(ne.jsx)(pt,{profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus})})}}]),n}(a.a.Component),ft=Object(j.d)(Object(l.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e);case 2:r=t.sent,n({type:"profilePage/SET-USER-PROFILE",profile:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUserStatus:function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(e);case 2:r=t.sent,n(k(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserStatus:function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(e);case 2:0===t.sent.resultCode&&n(k(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),pe.f,De)(bt),Ot=n(94),ht=n.n(Ot),gt=n.p+"static/media/Logo_header.8aaf41b6.png";function mt(e){return Object(ne.jsxs)("header",{className:ht.a.header,children:[Object(ne.jsx)("img",{src:gt,alt:""}),Object(ne.jsx)("div",{className:ht.a.loginBlock,children:e.isAuth?Object(ne.jsxs)("div",{children:[e.login," ",Object(ne.jsx)("button",{onClick:e.logout,children:"Log out"})]}):Object(ne.jsx)(u.b,{to:"/login",children:"Login"})})]})}var xt=function(e){Object(Y.a)(n,e);var t=Object(X.a)(n);function n(){return Object(Z.a)(this,n),t.apply(this,arguments)}return Object(K.a)(n,[{key:"render",value:function(){return Object(ne.jsx)(mt,Object(h.a)({},this.props))}}]),n}(a.a.Component),vt=Object(l.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:e.sent.resultCode===r.success&&t(W(null,null,null,!1,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(xt),Pt=Object(Pe.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return Object(ne.jsxs)("form",{onSubmit:t,children:[Object(ne.jsx)("div",{children:Object(ne.jsx)(_e.a,{placeholder:"Email",name:"email",component:ke,validate:[Se]})}),Object(ne.jsx)("div",{children:Object(ne.jsx)(_e.a,{placeholder:"Password",name:"password",component:ke,validate:[Se],type:"password"})}),Object(ne.jsxs)("div",{children:[Object(ne.jsx)(_e.a,{type:"checkbox",name:"rememberMe",component:ke})," remember me"]}),n&&Object(ne.jsx)("div",{className:Ie.a.formSummaryError,children:n}),Object(ne.jsx)("div",{children:Object(ne.jsx)("button",{children:"Login"})})]})})),St=Object(l.b)((function(e){return{captcha:e.auth.captcha,isAuth:e.auth.isAuth}}),{login:function(e,t,n,s){return function(){var a=Object(f.a)(b.a.mark((function a(c){var i;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,I(e,t,n,s);case 2:(i=a.sent).resultCode===r.success?c(B()):i.messages.length?c(Object(G.a)("login",{_error:i.messages[0]})):c(Object(G.a)("login",{_error:"Some error"}));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(ne.jsx)(pe.a,{to:"/profile"}):Object(ne.jsxs)("div",{children:[Object(ne.jsx)("h1",{children:"Login"}),Object(ne.jsx)(Pt,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)}})]})})),wt=function(e){Object(Y.a)(n,e);var t=Object(X.a)(n);function n(){return Object(Z.a)(this,n),t.apply(this,arguments)}return Object(K.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(ne.jsxs)("div",{className:$.a.appWrapper,children:[Object(ne.jsx)(vt,{}),Object(ne.jsx)(re,{}),Object(ne.jsxs)("div",{className:$.a.appWrapperContent,children:[Object(ne.jsx)(pe.b,{exact:!0,path:"/profile/:userId?",render:function(){return Object(ne.jsx)(ft,{})}}),Object(ne.jsx)(pe.b,{exact:!0,path:"/dialogs",render:function(){return Object(ne.jsx)(Le,{})}}),Object(ne.jsx)(pe.b,{exact:!0,path:"/users",render:function(){return Object(ne.jsx)(Ye,{})}}),Object(ne.jsx)(pe.b,{exact:!0,path:"/news",render:function(){return Object(ne.jsx)(ce,{})}}),Object(ne.jsx)(pe.b,{exact:!0,path:"/music",render:function(){return Object(ne.jsx)(ue,{})}}),Object(ne.jsx)(pe.b,{exact:!0,path:"/settings",render:function(){return Object(ne.jsx)(de,{})}}),Object(ne.jsx)(pe.b,{exact:!0,path:"/login",render:function(){return Object(ne.jsx)(St,{})}})]})]}):Object(ne.jsx)(We,{})}}]),n}(a.a.Component),_t=Object(j.d)(pe.f,Object(l.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t(B()),Promise.all([n]).then((function(){t({type:"app/INITIALIZED-SUCCESS"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(wt);o.a.render(Object(ne.jsx)(a.a.StrictMode,{children:Object(ne.jsx)(u.a,{children:Object(ne.jsx)(l.a,{store:V,children:Object(ne.jsx)(_t,{})})})}),document.getElementById("root")),c()},43:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__3Dn8Z",dialogsItem:"Dialogs_dialogsItem__1NNkN",textarea:"Dialogs_textarea__2IKdi"}},53:function(e,t,n){e.exports={formControl:"FormsControls_formControl__2Z8L4",error:"FormsControls_error__BtpDs",formSummaryError:"FormsControls_formSummaryError__2qS17"}},67:function(e,t,n){e.exports={profile:"Profile_profile__395W3"}},68:function(e,t,n){e.exports={myPosts:"MyPosts_myPosts__1Sq30",button:"MyPosts_button__3kRgS"}},86:function(e,t,n){e.exports={appWrapper:"App_appWrapper__1upY6",appWrapperContent:"App_appWrapperContent__1w-fS"}},89:function(e,t,n){e.exports={item:"DialogItem_item__FOhNE",activeLink:"DialogItem_activeLink__1OjsT"}},92:function(e,t,n){e.exports={userPhoto:"Users_userPhoto__Sr8R7",selectedPage:"Users_selectedPage__3gyJ6"}},93:function(e,t,n){e.exports={profileInfo:"ProfileInfo_profileInfo__26XEX",descriptionBlock:"ProfileInfo_descriptionBlock__2MG0-"}},94:function(e,t,n){e.exports={header:"Header_header__tmv2U",loginBlock:"Header_loginBlock__1H5dx"}}},[[290,1,2]]]);
//# sourceMappingURL=main.b0fa1484.chunk.js.map